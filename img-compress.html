<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool to compress your images while maintaining quality. Reduce file size for JPG, PNG, and WebP images.">
    <title>NexusCompress - Premium Image Optimization</title>
    <style>
        :root {
            --primary-bg: #0a0a0a;
            --secondary-bg: #1a1a1a;
            --accent-red: #ff2e4d;
            --accent-dark-red: #cc0022;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-color: #333333;
            --card-bg: #121212;
            --progress-bg: #333333;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        @supports (font-variation-settings: normal) {
            body { font-family: 'Inter var', -apple-system, BlinkMacSystemFont, sans-serif; }
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        /* Header */
        header {
            background-color: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
        }
        
        .logo-icon {
            color: var(--accent-red);
            margin-right: 0.5rem;
            font-size: 1.8rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s ease;
            position: relative;
        }
        
        nav a:hover {
            color: var(--text-primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-red);
            transition: width 0.3s ease;
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        /* Hero Section */
        .hero {
            padding: 5rem 0 3rem;
            text-align: center;
            background: linear-gradient(135deg, #0a0a0a 0%, #1f1f1f 100%);
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,46,77,0.1) 0%, rgba(0,0,0,0) 70%);
            z-index: 0;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, #ffffff, #ff9a9e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            line-height: 1.7;
        }
        
        /* Ad Banner */
        .ad-banner {
            background-color: var(--secondary-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem 0;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        /* Main Compressor */
        .compressor-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 2.5rem;
            margin: 2rem auto;
            border: 1px solid var(--border-color);
            max-width: 900px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .compressor-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .section-title::before {
            content: '';
            display: block;
            width: 6px;
            height: 1.5rem;
            background-color: var(--accent-red);
            border-radius: 3px;
        }
        
        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2.5rem;
            background-color: rgba(255, 255, 255, 0.02);
            position: relative;
            overflow: hidden;
        }
        
        .upload-area:hover {
            border-color: var(--accent-red);
            background-color: rgba(255, 46, 77, 0.05);
        }
        
        .upload-area.active {
            border-color: var(--accent-red);
            background-color: rgba(255, 46, 77, 0.08);
        }
        
        .upload-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            color: var(--accent-red);
            opacity: 0.9;
        }
        
        .upload-area h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .upload-area p {
            color: var(--text-secondary);
            margin-bottom: 0.3rem;
            font-size: 0.95rem;
        }
        
        .upload-area .small {
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        .upload-area input {
            display: none;
        }
        
        /* Controls */
        .controls {
            margin-bottom: 2.5rem;
        }
        
        .control-group {
            margin-bottom: 1.8rem;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 500;
            font-size: 1rem;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .slider-container input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: var(--progress-bg);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-red);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }
        
        .slider-value {
            width: 4rem;
            text-align: center;
            font-weight: 600;
            background-color: var(--secondary-bg);
            padding: 0.5rem 0;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
        }
        
        .format-option {
            padding: 0.7rem 1.3rem;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            font-weight: 500;
        }
        
        .format-option:hover {
            background-color: #252525;
        }
        
        .format-option.active {
            background-color: var(--accent-red);
            color: white;
            border-color: var(--accent-red);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--accent-red);
            color: white;
            border: none;
            padding: 0.9rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            gap: 0.6rem;
        }
        
        .btn:hover {
            background-color: var(--accent-dark-red);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 46, 77, 0.3);
        }
        
        .btn:disabled {
            background-color: #444;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }
        
        .btn i {
            font-size: 1.2rem;
        }
        
        .btn-secondary {
            background-color: var(--secondary-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background-color: #252525;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Results */
        .results {
            display: none;
            margin-top: 2.5rem;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }
        
        .image-box {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .image-box h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .image-box img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 1rem;
        }
        
        .image-info {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .image-info span {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            background-color: rgba(255, 255, 255, 0.05);
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
        }
        
        .image-info i {
            font-size: 0.8rem;
            color: var(--accent-red);
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-red);
            margin-bottom: 0.3rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        /* Loading Elements */
        .spinner {
            display: none;
            width: 3rem;
            height: 3rem;
            margin: 2rem auto;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent-red);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: var(--progress-bg);
            border-radius: 4px;
            margin: 2rem 0;
            display: none;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--accent-red), #ff7676);
            width: 0%;
            transition: width 0.4s ease;
        }
        
        /* Info Section */
        .info-section {
            max-width: 800px;
            margin: 3rem auto;
            color: var(--text-secondary);
        }
        
        .info-section h2 {
            color: var(--text-primary);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }
        
        .info-section h3 {
            color: var(--text-primary);
            font-size: 1.3rem;
            margin: 2rem 0 1rem;
            font-weight: 600;
        }
        
        .info-section p {
            margin-bottom: 1.2rem;
            line-height: 1.7;
        }
        
        .info-section ol {
            padding-left: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .info-section li {
            margin-bottom: 0.8rem;
            line-height: 1.6;
        }
        
        /* Footer */
        footer {
            background-color: var(--secondary-bg);
            margin-top: auto;
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--border-color);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .footer-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section li {
            margin-bottom: 0.8rem;
        }
        
        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.9rem;
        }
        
        .footer-section a:hover {
            color: var(--accent-red);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.85rem;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                gap: 1rem;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .compressor-container {
                padding: 1.5rem;
            }
            
            .comparison {
                grid-template-columns: 1fr;
            }
            
            .stats {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .hero {
                padding: 3rem 0 2rem;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .upload-area {
                padding: 2rem 1rem;
            }
            
            .slider-container {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .slider-value {
                width: 100%;
                text-align: center;
            }
        }
    </style>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="#" class="logo">
                <span class="logo-icon">🖼️</span>
                <span>NexusCompress</span>
            </a>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Features</a></li>
                    <li><a href="#">Pricing</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container hero-content">
            <h1>Professional Image Compression Made Simple</h1>
            <p>Optimize your JPG, PNG, and WebP images with our advanced compression technology. Reduce file sizes without sacrificing quality for faster websites and better performance.</p>
            
            <!-- Top Ad Banner -->
            <div class="ad-banner">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                     data-ad-slot="YOUR_AD_UNIT_ID"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </section>

    <div class="container">
        <div class="compressor-container">
            <h2 class="section-title">Image Compressor</h2>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">📁</div>
                <h3>Drag & Drop Your Images Here</h3>
                <p>or click to browse files</p>
                <p class="small">Supports JPG, PNG, WebP (Max 10MB)</p>
                <input type="file" id="fileInput" accept="image/jpeg, image/png, image/webp" multiple>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="compressionLevel">Compression Level: <span id="compressionValue">70</span>%</label>
                    <div class="slider-container">
                        <input type="range" id="compressionLevel" min="10" max="90" value="70" step="5">
                        <span class="slider-value" id="compressionDisplay">70%</span>
                    </div>
                </div>

                <div class="control-group">
                    <label>Output Format:</label>
                    <div class="format-options">
                        <div class="format-option active" data-format="original">
                            <i class="fas fa-file-image"></i> Original
                        </div>
                        <div class="format-option" data-format="jpeg">
                            <i class="fas fa-file-image"></i> JPG
                        </div>
                        <div class="format-option" data-format="png">
                            <i class="fas fa-file-image"></i> PNG
                        </div>
                        <div class="format-option" data-format="webp">
                            <i class="fas fa-file-image"></i> WebP
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn" id="compressBtn" disabled>
                <i class="fas fa-compress-alt"></i> Compress Images
            </button>
            
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="spinner" id="spinner"></div>

            <div class="results" id="results">
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="reductionPercent">0%</div>
                        <div class="stat-label">Size Reduction</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="savedSize">0 KB</div>
                        <div class="stat-label">Saved</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="qualityScore">100</div>
                        <div class="stat-label">Quality Score</div>
                    </div>
                </div>
                
                <div class="comparison">
                    <div class="image-box">
                        <h4>Original Image</h4>
                        <img id="originalImage" src="" alt="Original Image">
                        <div class="image-info">
                            <span><i class="fas fa-weight-hanging"></i> <span id="originalSize">0 KB</span></span>
                            <span><i class="fas fa-expand"></i> <span id="originalDimensions">0×0</span></span>
                            <span><i class="fas fa-file"></i> <span id="originalFormat">---</span></span>
                        </div>
                    </div>
                    <div class="image-box">
                        <h4>Compressed Image</h4>
                        <img id="compressedImage" src="" alt="Compressed Image">
                        <div class="image-info">
                            <span><i class="fas fa-weight-hanging"></i> <span id="compressedSize">0 KB</span></span>
                            <span><i class="fas fa-expand"></i> <span id="compressedDimensions">0×0</span></span>
                            <span><i class="fas fa-file"></i> <span id="compressedFormat">---</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="downloadBtn">
                        <i class="fas fa-download"></i> Download Compressed
                    </button>
                    <button class="btn btn-secondary" id="newImageBtn">
                        <i class="fas fa-redo"></i> New Image
                    </button>
                </div>
            </div>
        </div>

        <!-- Middle Ad Banner -->
        <div class="ad-banner">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                 data-ad-slot="YOUR_AD_UNIT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="info-section">
            <h2>Why Compress Your Images?</h2>
            <p>In today's digital world, image optimization is crucial for website performance, user experience, and SEO rankings. Large images slow down page loading times, increase bandwidth usage, and can negatively impact your search engine visibility.</p>
            
            <h3>How Our Compression Works</h3>
            <p>Our advanced algorithm analyzes each image to find the optimal balance between file size reduction and visual quality. We use sophisticated techniques to remove unnecessary metadata and optimize encoding without noticeable loss in quality.</p>
            
            <h3>Best Practices</h3>
            <ol>
                <li><strong>Choose the right format:</strong> JPG for photographs, PNG for graphics with transparency, WebP for modern browsers</li>
                <li><strong>Start with high-quality images:</strong> Compressing already compressed images can degrade quality</li>
                <li><strong>Test different levels:</strong> Find the sweet spot between size and quality for your needs</li>
                <li><strong>Consider multiple versions:</strong> Create different sizes for different devices</li>
                <li><strong>Use descriptive filenames:</strong> Helps with SEO and organization</li>
            </ol>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>NexusCompress</h3>
                    <p>Premium image compression tool for professionals and businesses. Optimize your visuals without compromising quality.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">API Documentation</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">Image Optimization Guide</a></li>
                        <li><a href="#">Web Performance Tips</a></li>
                        <li><a href="#">Developer Tools</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="fab fa-github"></i> GitHub</a></li>
                        <li><a href="#"><i class="fab fa-discord"></i> Discord</a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; <span id="currentYear"></span> NexusCompress. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // DOM elements
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const compressionLevel = document.getElementById('compressionLevel');
            const compressionDisplay = document.getElementById('compressionDisplay');
            const compressionValue = document.getElementById('compressionValue');
            const compressBtn = document.getElementById('compressBtn');
            const formatOptions = document.querySelectorAll('.format-option');
            const results = document.getElementById('results');
            const originalImage = document.getElementById('originalImage');
            const compressedImage = document.getElementById('compressedImage');
            const originalSize = document.getElementById('originalSize');
            const compressedSize = document.getElementById('compressedSize');
            const originalDimensions = document.getElementById('originalDimensions');
            const compressedDimensions = document.getElementById('compressedDimensions');
            const originalFormat = document.getElementById('originalFormat');
            const compressedFormat = document.getElementById('compressedFormat');
            const reductionPercent = document.getElementById('reductionPercent');
            const savedSize = document.getElementById('savedSize');
            const qualityScore = document.getElementById('qualityScore');
            const downloadBtn = document.getElementById('downloadBtn');
            const newImageBtn = document.getElementById('newImageBtn');
            const spinner = document.getElementById('spinner');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            
            // Variables
            let selectedFile = null;
            let outputFormat = 'original';
            let compressedFileUrl = '';
            
            // Event listeners
            uploadArea.addEventListener('click', () => fileInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--accent-red)';
                uploadArea.style.backgroundColor = 'rgba(255, 46, 77, 0.1)';
                uploadArea.classList.add('active');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--border-color)';
                uploadArea.style.backgroundColor = 'rgba(255, 255, 255, 0.02)';
                uploadArea.classList.remove('active');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--border-color)';
                uploadArea.style.backgroundColor = 'rgba(255, 255, 255, 0.02)';
                uploadArea.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    handleFileSelect(e.dataTransfer.files[0]);
                }
            });
            
            fileInput.addEventListener('change', () => {
                if (fileInput.files.length) {
                    handleFileSelect(fileInput.files[0]);
                }
            });
            
            compressionLevel.addEventListener('input', updateCompressionDisplay);
            
            formatOptions.forEach(option => {
                option.addEventListener('click', () => {
                    formatOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    outputFormat = option.dataset.format;
                });
            });
            
            compressBtn.addEventListener('click', compressImage);
            downloadBtn.addEventListener('click', downloadImage);
            newImageBtn.addEventListener('click', resetTool);
            
            // Functions
            function updateCompressionDisplay() {
                const value = compressionLevel.value;
                compressionDisplay.textContent = `${value}%`;
                compressionValue.textContent = value;
            }
            
            function handleFileSelect(file) {
                // Check file type
                const validTypes = ['image/jpeg', 'image/png', 'image/webp'];
                if (!validTypes.includes(file.type)) {
                    showError('Please select a valid image file (JPEG, PNG, or WebP)');
                    return;
                }
                
                // Check file size (max 10MB)
                if (file.size > 10 * 1024 * 1024) {
                    showError('File size exceeds 10MB limit. Please choose a smaller image.');
                    return;
                }
                
                selectedFile = file;
                compressBtn.disabled = false;
                
                // Display original image
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImage.src = e.target.result;
                    
                    // Get image dimensions and format
                    const img = new Image();
                    img.onload = function() {
                        originalDimensions.textContent = `${this.width}×${this.height}`;
                        originalFormat.textContent = getFormatName(file.type);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
                // Display original size
                originalSize.textContent = formatFileSize(file.size);
                
                // Reset results
                results.style.display = 'none';
            }
            
            function compressImage() {
                if (!selectedFile) return;
                
                // Show loading state
                spinner.style.display = 'block';
                progressContainer.style.display = 'block';
                compressBtn.disabled = true;
                
                // Simulate progress (in a real app, this would be based on actual compression progress)
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 2 + Math.random() * 3;
                    if (progress > 100) progress = 100;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        processCompression();
                    }
                }, 50);
            }
            
            function processCompression() {
                // In a real implementation, this would use actual compression algorithms
                // For this demo, we'll simulate compression with a canvas
                
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Maintain original dimensions
                    canvas.width = this.width;
                    canvas.height = this.height;
                    
                    // Draw image on canvas
                    ctx.drawImage(this, 0, 0);
                    
                    // Get quality level (0-1)
                    const quality = compressionLevel.value / 100;
                    
                    // Determine output format
                    let mimeType = selectedFile.type;
                    if (outputFormat !== 'original') {
                        mimeType = `image/${outputFormat}`;
                    }
                    
                    // Convert to data URL with specified quality
                    canvas.toBlob(function(blob) {
                        compressedFileUrl = URL.createObjectURL(blob);
                        
                        // Display compressed image
                        compressedImage.src = compressedFileUrl;
                        compressedDimensions.textContent = `${img.width}×${img.height}`;
                        compressedSize.textContent = formatFileSize(blob.size);
                        compressedFormat.textContent = getFormatName(mimeType);
                        
                        // Calculate reduction stats
                        const originalSizeBytes = selectedFile.size;
                        const compressedSizeBytes = blob.size;
                        const reductionPercentage = ((originalSizeBytes - compressedSizeBytes) / originalSizeBytes * 100).toFixed(1);
                        const savedBytes = originalSizeBytes - compressedSizeBytes;
                        
                        reductionPercent.textContent = `${reductionPercentage}%`;
                        savedSize.textContent = formatFileSize(savedBytes);
                        qualityScore.textContent = Math.min(100, Math.floor(quality * 110)); // Fake quality score
                        
                        // Set download link
                        downloadBtn.onclick = function() {
                            const a = document.createElement('a');
                            a.href = compressedFileUrl;
                            const fileExt = outputFormat === 'original' ? 
                                selectedFile.name.split('.').pop() : outputFormat;
                            a.download = `compressed_${selectedFile.name.split('.')[0]}.${fileExt}`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                        };
                        
                        // Hide loading state and show results
                        spinner.style.display = 'none';
                        progressContainer.style.display = 'none';
                        results.style.display = 'block';
                        compressBtn.disabled = false;
                        
                    }, mimeType, quality);
                };
                
                img.src = URL.createObjectURL(selectedFile);
            }
            
            function downloadImage() {
                // Handled in the processCompression function
            }
            
            function resetTool() {
                selectedFile = null;
                fileInput.value = '';
                compressBtn.disabled = true;
                results.style.display = 'none';
                originalImage.src = '';
                compressedImage.src = '';
                originalSize.textContent = '0 KB';
                originalDimensions.textContent = '0×0';
                originalFormat.textContent = '---';
                
                // Clean up object URL
                if (compressedFileUrl) {
                    URL.revokeObjectURL(compressedFileUrl);
                    compressedFileUrl = '';
                }
            }
            
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' bytes';
                else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / 1048576).toFixed(1) + ' MB';
            }
            
            function getFormatName(mimeType) {
                const formats = {
                    'image/jpeg': 'JPG',
                    'image/png': 'PNG',
                    'image/webp': 'WebP'
                };
                return formats[mimeType] || mimeType.split('/').pop().toUpperCase();
            }
            
            function showError(message) {
                alert(message); // In production, replace with a prettier error display
            }
        });
    </script>
</body>
</html>
